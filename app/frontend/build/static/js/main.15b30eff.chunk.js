(this.webpackJsonpapp=this.webpackJsonpapp||[]).push([[0],{194:function(e,t){},383:function(e,t,o){},385:function(e,t,o){},386:function(e,t,o){},391:function(e,t,o){},493:function(e,t){},497:function(e,t,o){"use strict";o.r(t);var n=o(11),i=o(1),a=o.n(i),c=o(60),r=o.n(c),l=o(187),s=(o(383),o(384),o(147)),d=o(38),u=(o(385),function(){return Object(n.jsx)("div",{className:"border-gray-200 border-l-0 border-r-0 border-b-0  border w-full",children:Object(n.jsxs)("div",{style:{zIndex:999e3},className:" container-fluid text-gray-500 text-sm w-full p-2",children:["Made with ",Object(n.jsx)("span",{className:"text-red-500",children:"\u2665"})," at"," ",Object(n.jsx)("a",{href:"https://www.cloudera.com/products/fast-forward-labs-research.html",target:"blank",children:"Cloudera Fast Forward Labs"}),"."]})})}),b=function(e){var t=e.icon,o=void 0===t?"info":t;if("cloudera"===o.toLowerCase()||"cloudera"===o.toLowerCase())return Object(n.jsxs)("svg",{width:"100px",height:"12px",viewBox:"0 0 100 12",version:"1.1",xmlns:"http://www.w3.org/2000/svg",children:[Object(n.jsx)("title",{children:"logo-cloudera-white"}),Object(n.jsx)("g",{id:"Symbols",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",children:Object(n.jsxs)("g",{id:"product-logos/cloudera-logo/cloudera-white",children:[Object(n.jsx)("rect",{fill:"#000000",x:"0",y:"0",width:"100",height:"12"}),Object(n.jsx)("path",{d:"M45.088964,6.679 C45.088964,8.497 44.029313,9.594 42.5393055,9.594 C41.0492981,9.594 39.9896471,8.497 39.9896471,6.679 L39.9896471,0.262 L37.2907849,0.262 L37.2907849,6.576 C37.2907849,9.901 39.410087,12 42.5393055,12 C45.6675091,12 47.7868112,9.901 47.7868112,6.576 L47.7868112,0.262 L45.088964,0.262 L45.088964,6.679 Z M95.4670483,7.266 L93.846107,3.245 L92.2251657,7.266 L95.4670483,7.266 Z M100,11.738 L97.2706881,11.738 L96.325731,9.396 L91.366483,9.396 L90.4225409,11.738 L87.693229,11.738 L92.6108624,0.262 L95.027557,0.262 L100,11.738 Z M83.9956152,4.221 C83.9956152,3.714 83.789572,3.24 83.4769546,2.969 C83.1237376,2.663 82.6162419,2.504 81.9108229,2.504 L79.3317296,2.504 L79.3317296,5.95 L81.9189428,5.95 C82.6111669,5.95 83.1034378,5.796 83.4525948,5.5 C83.781452,5.221 83.9956152,4.742 83.9956152,4.221 L83.9956152,4.221 Z M83.7296875,7.877 L87.0527694,11.738 L83.9113709,11.738 L80.8176771,8.115 L79.3317296,8.115 L79.3317296,11.738 L76.687677,11.738 L76.687677,0.262 L82.0590116,0.262 C83.556124,0.262 84.6553597,0.622 85.444008,1.286 C86.2326563,1.95 86.6914325,2.97 86.6914325,4.184 C86.6914325,5.704 86.035748,7.283 83.7296875,7.877 L83.7296875,7.877 Z M15.8886757,0.262 L13.1908285,0.262 L13.1908285,11.738 L21.3533896,11.738 L21.3533896,9.403 L15.8886757,9.403 L15.8886757,0.262 Z M6.2361073,9.576 C4.24367914,9.576 2.79934635,8.027 2.79934635,5.999 C2.79934635,3.971 4.24367914,2.425 6.2361073,2.425 C7.1952742,2.425 7.98696751,2.761 8.67919166,3.407 L10.417872,1.694 C9.36735585,0.626 7.90170823,0 6.20667255,0 C2.70190717,0 0,2.636 0,6 C0,9.365 2.70190717,12 6.20667255,12 C7.97783259,12 9.52873948,11.295 10.5853456,10.111 L8.85580017,8.407 C8.15748607,9.167 7.32417811,9.576 6.2361073,9.576 L6.2361073,9.576 Z M59.409478,6 C59.409478,3.928 57.8900358,2.556 55.6276199,2.556 L53.84834,2.556 L53.84834,9.444 L55.6276199,9.444 C57.8900358,9.444 59.409478,8.072 59.409478,6 L59.409478,6 Z M62.2098393,6 C62.2098393,9.432 59.640896,11.738 55.8184383,11.738 L51.1504928,11.738 L51.1504928,0.262 L55.7047593,0.262 C59.528232,0.262 62.2098393,2.568 62.2098393,6 L62.2098393,6 Z M31.8443409,6.018 C31.8443409,3.925 30.4538027,2.407 28.4918242,2.407 C26.5318758,2.407 25.1403226,3.925 25.1403226,6.018 C25.1403226,8.09 26.5318758,9.594 28.4918242,9.594 C30.4538027,9.594 31.8443409,8.09 31.8443409,6.018 L31.8443409,6.018 Z M34.6436873,6.017 C34.6436873,9.372 32.065609,12 28.4918242,12 C24.9190544,12 22.3409762,9.372 22.3409762,6.017 C22.3409762,2.643 24.9190544,0 28.4918242,0 C32.065609,0 34.6436873,2.643 34.6436873,6.017 L34.6436873,6.017 Z M63.435949,11.738 L73.5269937,11.738 L73.5269937,9.366 L65.0325305,9.366 C64.6539387,10.265 64.1119333,11.058 63.435949,11.738 L63.435949,11.738 Z M72.0928108,7.137 L72.0928108,4.788 L65.5846858,4.788 C65.6415253,5.19 65.680095,5.6 65.680095,6.027 C65.680095,6.408 65.6506603,6.776 65.6070156,7.137 L72.0928108,7.137 Z M63.3070451,0.262 L73.4742141,0.262 L73.4742141,2.634 L64.9878709,2.634 C64.5859342,1.733 64.0134791,0.941 63.3070451,0.262 L63.3070451,0.262 Z",id:"cloudera",fill:"#FFFFFF"})]})})]})},j=(o(386),function(){return Object(n.jsxs)("div",{children:[Object(n.jsx)("div",{className:"headermain","aria-label":"Dataset for Automated Generation of Visualizations",children:Object(n.jsx)("div",{className:"  w-full  container-fluid   headerrow pl-1 ",children:Object(n.jsxs)("div",{className:"flex  h-full",children:[Object(n.jsx)("div",{className:"h-full   flex flex-col justify-center mr-2 ml-2  ",children:Object(n.jsx)("a",{href:"/#",children:Object(n.jsx)(b,{icon:"cloudera"})})}),Object(n.jsx)("div",{className:"apptitle  flex flex-col justify-center  mr-1",children:Object(n.jsxs)("div",{className:"text-white  font-semibold text-sm  iblock mr-2 ml-1",children:[" ","Covid Advisor"," "]})}),Object(n.jsx)("div",{className:"h-full   flex  text-sm  navbarlinks ",children:Object(n.jsx)(s.b,{exact:!0,to:"/",children:"Office Locations"})})]})})}),Object(n.jsx)("div",{}),Object(n.jsx)("div",{className:"headerboost",children:" "})]})}),h=o(71),f=(o(391),o(513)),p=o(518),m=o(515),x=o(258),v=o(265),g=o(512),O=g.a.Option,w=function(e){var t=e.locations||[],o=Object(i.useState)(0),a=Object(h.a)(o,2);a[0],a[1],t.map((function(e,t){return Object(n.jsxs)(O,{value:e.work_location,children:[" ",e.work_location," "]},"locrow"+t)}));return t.length>0&&Object(n.jsxs)("div",{className:"mt-2   inline-block rounded-sm   bg-white p-3  bg-opacity-90",children:[Object(n.jsxs)("div",{className:"mb-2 text-sm font-semibold",children:[" ","Location Type (",t.length,")"," "]}),Object(n.jsx)("div",{className:"mb-2",children:" "}),Object(n.jsxs)("div",{className:"mt-2",children:[Object(n.jsxs)(g.a,{defaultValue:e.locationType,showSearch:!0,style:{width:200},placeholder:"Select a location",optionFilterProp:"children",onChange:function(t){e.setLocationType(t)},filterOption:function(e,t){return t.children.toLowerCase().indexOf(e.toLowerCase())>=0},children:[Object(n.jsx)(O,{value:"work",children:"Work Locations"}),Object(n.jsx)(O,{value:"all",children:"All Employee Locations"})]}),Object(n.jsxs)("div",{className:"text-xs mt-1 text-gray-500",children:[" ","Data last updated 2 days ago."]})]})]})},L=o(64),k=g.a.Option,C=function(e){var t,o,a,c=e.locations||[],r="rgba(147, 197, 253,0.3)",l=100,s={top:10,right:5,bottom:25,left:20},d=350-s.left-s.right,u=150-s.top-s.bottom,b=L.d().x((function(e,t){return o(t)})).y((function(e){return a(e)})),j=L.a().x((function(e,t){return o(t)})).y0((function(e){return a(e[0])})).y1((function(e){return a(e[1])})),h=e.trends.filter((function(t){return t.location===e.selectedLocation.location}))[0];c.map((function(e,t){return Object(n.jsxs)(k,{value:e.work_location,children:[" ",e.work_location," "]},"locrow"+t)}));function f(e){var t=e.length;o=L.g().domain([0,t-1]).range([0,d]),a=L.g().domain([L.f(e),L.e(e)]).range([u,0]),L.b(o),L.c(a).tickSize(350)}Object(i.useEffect)((function(){!function(){var e=(null===h||void 0===h?void 0:h.data)||[],t=(null===h||void 0===h?void 0:h.trend_pred)||[],o=(null===h||void 0===h?void 0:h.trend_pred_upper)||[],n=(null===h||void 0===h?void 0:h.trend_pred_lower)||[],i=o.map((function(e,t){return[e,n[t]]}));f(e);var a=d,c=u,l=s,p=L.h("div.linechartbox").append("svg").attr("width",a+l.left+l.right).attr("height",c+l.top+l.bottom).append("g").attr("transform","translate("+l.left+","+l.top+")");p.append("path").datum(e).attr("class","dataline").attr("stroke","grey").attr("stroke-width",1.5).attr("fill","none").attr("d",b),p.append("path").datum(t).attr("class","trendline").attr("stroke","green").attr("fill","none").attr("stroke-width",1.5).attr("d",b),p.append("path").datum(i).attr("class","msearea").attr("fill",r).attr("stroke","none").attr("d",j)}()}),[]),Object(i.useEffect)((function(){!function(){var e=(null===h||void 0===h?void 0:h.data)||[],t=(null===h||void 0===h?void 0:h.trend_pred)||[],o=(null===h||void 0===h?void 0:h.trend_pred_upper)||[],n=(null===h||void 0===h?void 0:h.trend_pred_lower)||[],i=o.map((function(e,t){return[e,n[t]]}));f(e);var a=L.h("div.linechartbox").transition();a.select(".dataline").duration(l).attr("stroke","gray").attr("fill","none").attr("d",b(e)),a.select(".trendline").duration(450).attr("stroke","orange").attr("fill","none").attr("d",b(t)),a.select(".msearea").duration(l).attr("fill",r).attr("stroke","none").attr("d",j(i))}()}),[e.selectedLocation]);var p=c.length>0,m=null===(t=e.selectedLocation)||void 0===t?void 0:t.location;return Object(n.jsx)("div",{children:Object(n.jsxs)("div",{className:"mt-2   inline-block rounded-sm   bg-white p-3  bg-opacity-90 "+(p&&m?"":" hidden"),children:[Object(n.jsxs)("div",{className:"mb-2 text-sm font-semibold",children:[" ","Covid Trends for (",e.selectedLocation.location,")"," "]}),Object(n.jsx)("div",{id:"linechartbox",className:"linechartbox"}),Object(n.jsxs)("div",{children:[Object(n.jsx)("span",{className:"w-2 h-2 bg-gray-500 inline-block",children:" "})," ",Object(n.jsx)("span",{className:"text-sm mr-3",children:" data "}),Object(n.jsx)("span",{className:"w-2 h-2 bg-yellow-600 inline-block",children:" "})," ",Object(n.jsx)("span",{className:"text-sm mr-3",children:" trend "}),Object(n.jsx)("span",{className:"w-2 h-2 bg-blue-300 inline-block",children:" "})," ",Object(n.jsx)("span",{className:"text-sm",children:" uncertainty "})]})]})})};function y(e){return fetch(e).then((function(e){if(200===e.status)return e.json().then((function(e){return e}));console.log("Looks like there was a problem. Status Code: "+e.status)})).catch((function(e){return Promise.reject(e)}))}var N=o(253),_=o.n(N),M=o(254),S=o.n(M),E=(g.a.Option,function(e){var t=e.locations.map((function(e){return e.work_location_postal_code})),o=_()(e.trends.filter((function(e){return t.includes(e.location)})),"slope_data.slope"),a=Object(i.useState)(0),c=Object(h.a)(a,2),r=(c[0],c[1],Object(i.useState)(!1)),l=Object(h.a)(r,2),s=l[0],d=l[1],u=S()(o.map((function(e){return e.slope_data.risk})),(function(e){return e.color+e.label})).reverse();function b(e){e.preventDefault();var t=document.getElementById("mainriskdiv");t&&!t.contains(e.target)&&d(!1)}Object(i.useEffect)((function(){return window.addEventListener("click",b,!1),function(){window.removeEventListener("click",b,!1)}}),[]);var j=u.map((function(e,t){var i=t===u.length-1,a=o.filter((function(t){return t.slope_data.risk.color===e.color})),c=a.map((function(e,t){return Object(n.jsxs)("div",{className:"text-sm border p-1 pl-2 mb-1 cursor-pointer rounded-sm hover:bg-gray-100",children:[Object(n.jsx)("div",{className:"w-2.5 h-2.5 inline-block mr-2 bg-"+e.slope_data.risk.color+"-500",children:" "}),e.location," "]},"locrow"+t)}));return Object(n.jsxs)("div",{className:"p3 flex-1 "+(i?" ":" pr-3"),children:[Object(n.jsxs)("div",{className:"p-1 pl-2 pr-2  text-white whitespace-nowrap font-semibold rounded-sm mb-2   bg-"+e.color+"-500",children:[" ",e.label," (",a.length,")"]}),s&&Object(n.jsx)("div",{children:c})]},"labelrow"+t)}));o.map((function(e,t){return Object(n.jsxs)("div",{className:"text-sm",children:[Object(n.jsx)("div",{className:"w-2.5 h-2.5 inline-block mr-2 bg-"+e.slope_data.risk.color+"-500",children:" "}),e.location," "]},"locrow"+t)}));return Object(n.jsx)(n.Fragment,{children:o.length>0&&Object(n.jsxs)("div",{id:"mainriskdiv",className:"relative w-max ",children:[Object(n.jsxs)("div",{className:" flex w-full bg-opacity-90  absolute p-3 pb-2  bg-white mb-4   ",children:[" ",Object(n.jsxs)("span",{className:"font-semibold  pt-1 pb-0 flex-grow",children:[" ","Location Trend"]}),Object(n.jsx)("span",{onClick:function(e){d(!s)},className:"ml-3 p-2 rounded-sm hover:bg-gray-200 bg-gray-100x  border-gray-300 bg-white  text-xs      cursor-pointer",children:s?"< Hide Details":"Show Details > "})]}),Object(n.jsx)("div",{className:"riskdiv overflow-auto mt-3 pt-14 bg-white   w-max  rounded-sm  bg-opacity-90    p-3 ",children:Object(n.jsxs)("div",{className:"flex",children:[" ",j," "]})}),Object(n.jsx)("div",{className:"bg-red-500 bg-green-500 bg-yellow-500 border-red-500  border-yellow-500 border-green-500"})]})})}),F=function(e){var t,o=Object(i.useState)({work:[],all:[]}),a=Object(h.a)(o,2),c=a[0],r=a[1],l=Object(i.useState)([]),s=Object(h.a)(l,2),d=s[0],u=s[1],b=Object(i.useState)("work"),j=Object(h.a)(b,2),g=j[0],O=j[1],L=Object(i.useState)({}),k=Object(h.a)(L,2),N=k[0],_=k[1],M={};d.forEach((function(e){M[e.location]=e.slope_data.risk}));var S=c[g].filter((function(e){return e.work_location_postal_code.includes("Santa Clara")}))[0]||{},F=M["US-California-Santa Clara (HQ)-94306"],Z=[S.geo_long,S.geo_lat],B=[],P=[];c[g].forEach((function(e){var t=[e.geo_long,e.geo_lat];B.push({sourcePosition:Z,targetPosition:t,sourceRisk:F,targetRisk:M[e.work_location_postal_code]}),P.push({coords:t,risk:M[e.work_location_postal_code],location:e.work_location_postal_code})}));function T(e){var t=document.getElementById("tooltipitem");t.style.top=e.y-10+"px",t.style.left=e.x+15+"px",_(e.object)}Object(i.useEffect)((function(){var t=e.selections.serverBasePath+"/trends",o=e.selections.serverBasePath+"/locations";console.log("Trends and Locations Data requested .."),y(o).then((function(e){e&&r(e)})).catch((function(e){console.log("Failed to fetch locations data.",e)})),y(t).then((function(e){e&&u(e)})).catch((function(e){console.log("Failed to fetch trends data.",e)}))}),[e.selections.serverBasePath]),Object(i.useEffect)((function(){document.title="Cloudera Covid Advisor | Locations "}),[]);var I="",D=!1;return Object(n.jsxs)("div",{className:"",children:[Object(n.jsx)("div",{className:"  ",children:Object(n.jsxs)(f.a,{getCursor:function(e){return e.isDragging?"grabbing":D?"pointer":"grab"},initialViewState:{longitude:18.419257623928356,latitude:47.22416217215195,zoom:1.3,pitch:10,bearing:0},controller:!0,children:[Object(n.jsx)(v.a,{id:"map",width:"100%",controller:!0,children:Object(n.jsx)(x.a,{mapboxApiAccessToken:"pk.eyJ1IjoidmljdG9yZGliaWEiLCJhIjoiY2pzNWY2OWp4MGYwaTQ0cXBkaHFsc2hueiJ9.JdZVrIDyHkAsnuXqAxycsg"})}),Object(n.jsx)(m.a,{id:"heatmap-plot",data:P,opacity:.2,getPosition:function(e){return e.coords}}),Object(n.jsx)(p.a,{id:"locations-scatter-plot",data:P,pickable:!0,opacity:.8,radiusMinPixels:8,getPosition:function(e){return e.coords},getRadius:function(e){return 1900},getFillColor:function(e){var t;return function(e){var t=[0,0,0];switch(e){case"red":t=[239,68,68];break;case"yellow":t=[245,158,11];break;case"green":t=[16,185,129];break;default:t=[0,0,0]}return t}(null===(t=e.risk)||void 0===t?void 0:t.color)},getLineColor:function(e){return[0,0,0]},onClick:T,onHover:function(e){var t,o;if(D=Boolean(e),(null===(t=e.object)||void 0===t?void 0:t.location)&&(null===(o=e.object)||void 0===o?void 0:o.location)!==I){var n,i,a;I=null===(n=e.object)||void 0===n?void 0:n.location;var c=document.getElementById("tooltipitem");c.style.top=e.y-10+"px",c.style.left=e.x+15+"px";var r="h-2 mb-1 bg-"+(null===(i=e.object.risk)||void 0===i?void 0:i.color)+"-500";document.getElementById("tooltiplocation").textContent=null===(a=e.object)||void 0===a?void 0:a.location,document.getElementById("tooltipbar").className=r}},onMouseEnter:T})]})}),Object(n.jsxs)("div",{id:"tooltipitem",className:"pointer-events-none absolute -left-10 p-3 shadow rounded-sm bg-white",children:[" ",Object(n.jsx)("div",{id:"tooltipbar",className:"h-2 mb-1 bg-"+(null===(t=N.risk)||void 0===t?void 0:t.color)+"-500"}),Object(n.jsx)("span",{id:"tooltiplocation",children:N.location})]}),Object(n.jsxs)("div",{className:"absolute ml-2 ",children:[Object(n.jsx)(w,{locations:c[g],trends:d,setLocationType:O,locationType:g}),Object(n.jsx)(E,{locations:c[g],trends:d}),Object(n.jsx)(C,{locations:c[g],trends:d,selectedLocation:N})]})]})};var Z=function(){var e={serverBasePath:window.location.protocol+"//"+window.location.host};return Object(n.jsx)(s.a,{children:Object(n.jsxs)("div",{className:"flex flex-col h-screen  ",children:[Object(n.jsx)(j,{}),Object(n.jsx)("main",{className:"container-fluid w-full   flex-grow p-2",children:Object(n.jsx)(d.a,{exact:!0,path:"/",render:function(t){return Object(n.jsx)(F,Object(l.a)(Object(l.a)({},t),{},{selections:e}))}})}),Object(n.jsx)(u,{})]})})},B=function(e){e&&e instanceof Function&&o.e(3).then(o.bind(null,519)).then((function(t){var o=t.getCLS,n=t.getFID,i=t.getFCP,a=t.getLCP,c=t.getTTFB;o(e),n(e),i(e),a(e),c(e)}))};r.a.render(Object(n.jsx)(a.a.StrictMode,{children:Object(n.jsx)(Z,{})}),document.getElementById("root")),B()}},[[497,1,2]]]);
//# sourceMappingURL=main.15b30eff.chunk.js.map