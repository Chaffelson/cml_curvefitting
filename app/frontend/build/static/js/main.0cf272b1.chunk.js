(this.webpackJsonpapp=this.webpackJsonpapp||[]).push([[0],{174:function(e,t){},243:function(e,t,o){},245:function(e,t,o){},246:function(e,t,o){},251:function(e,t,o){},354:function(e,t){},358:function(e,t,o){"use strict";o.r(t);var c=o(13),n=o(1),i=o.n(n),s=o(59),l=o.n(s),r=o(175),a=(o(243),o(244),o(136)),d=o(36),u=(o(245),function(){return Object(c.jsx)("div",{className:"border-gray-200 border-l-0 border-r-0 border-b-0  border w-full",children:Object(c.jsxs)("div",{style:{zIndex:999e3},className:" container-fluid text-gray-500 text-sm w-full p-2",children:["Made with ",Object(c.jsx)("span",{className:"text-red-500",children:"\u2665"})," at"," ",Object(c.jsx)("a",{href:"https://www.cloudera.com/products/fast-forward-labs-research.html",target:"blank",children:"Cloudera Fast Forward Labs"}),"."]})})}),j=function(e){var t=e.icon,o=void 0===t?"info":t;if("cloudera"===o.toLowerCase()||"cloudera"===o.toLowerCase())return Object(c.jsxs)("svg",{width:"100px",height:"12px",viewBox:"0 0 100 12",version:"1.1",xmlns:"http://www.w3.org/2000/svg",children:[Object(c.jsx)("title",{children:"logo-cloudera-white"}),Object(c.jsx)("g",{id:"Symbols",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",children:Object(c.jsxs)("g",{id:"product-logos/cloudera-logo/cloudera-white",children:[Object(c.jsx)("rect",{fill:"#000000",x:"0",y:"0",width:"100",height:"12"}),Object(c.jsx)("path",{d:"M45.088964,6.679 C45.088964,8.497 44.029313,9.594 42.5393055,9.594 C41.0492981,9.594 39.9896471,8.497 39.9896471,6.679 L39.9896471,0.262 L37.2907849,0.262 L37.2907849,6.576 C37.2907849,9.901 39.410087,12 42.5393055,12 C45.6675091,12 47.7868112,9.901 47.7868112,6.576 L47.7868112,0.262 L45.088964,0.262 L45.088964,6.679 Z M95.4670483,7.266 L93.846107,3.245 L92.2251657,7.266 L95.4670483,7.266 Z M100,11.738 L97.2706881,11.738 L96.325731,9.396 L91.366483,9.396 L90.4225409,11.738 L87.693229,11.738 L92.6108624,0.262 L95.027557,0.262 L100,11.738 Z M83.9956152,4.221 C83.9956152,3.714 83.789572,3.24 83.4769546,2.969 C83.1237376,2.663 82.6162419,2.504 81.9108229,2.504 L79.3317296,2.504 L79.3317296,5.95 L81.9189428,5.95 C82.6111669,5.95 83.1034378,5.796 83.4525948,5.5 C83.781452,5.221 83.9956152,4.742 83.9956152,4.221 L83.9956152,4.221 Z M83.7296875,7.877 L87.0527694,11.738 L83.9113709,11.738 L80.8176771,8.115 L79.3317296,8.115 L79.3317296,11.738 L76.687677,11.738 L76.687677,0.262 L82.0590116,0.262 C83.556124,0.262 84.6553597,0.622 85.444008,1.286 C86.2326563,1.95 86.6914325,2.97 86.6914325,4.184 C86.6914325,5.704 86.035748,7.283 83.7296875,7.877 L83.7296875,7.877 Z M15.8886757,0.262 L13.1908285,0.262 L13.1908285,11.738 L21.3533896,11.738 L21.3533896,9.403 L15.8886757,9.403 L15.8886757,0.262 Z M6.2361073,9.576 C4.24367914,9.576 2.79934635,8.027 2.79934635,5.999 C2.79934635,3.971 4.24367914,2.425 6.2361073,2.425 C7.1952742,2.425 7.98696751,2.761 8.67919166,3.407 L10.417872,1.694 C9.36735585,0.626 7.90170823,0 6.20667255,0 C2.70190717,0 0,2.636 0,6 C0,9.365 2.70190717,12 6.20667255,12 C7.97783259,12 9.52873948,11.295 10.5853456,10.111 L8.85580017,8.407 C8.15748607,9.167 7.32417811,9.576 6.2361073,9.576 L6.2361073,9.576 Z M59.409478,6 C59.409478,3.928 57.8900358,2.556 55.6276199,2.556 L53.84834,2.556 L53.84834,9.444 L55.6276199,9.444 C57.8900358,9.444 59.409478,8.072 59.409478,6 L59.409478,6 Z M62.2098393,6 C62.2098393,9.432 59.640896,11.738 55.8184383,11.738 L51.1504928,11.738 L51.1504928,0.262 L55.7047593,0.262 C59.528232,0.262 62.2098393,2.568 62.2098393,6 L62.2098393,6 Z M31.8443409,6.018 C31.8443409,3.925 30.4538027,2.407 28.4918242,2.407 C26.5318758,2.407 25.1403226,3.925 25.1403226,6.018 C25.1403226,8.09 26.5318758,9.594 28.4918242,9.594 C30.4538027,9.594 31.8443409,8.09 31.8443409,6.018 L31.8443409,6.018 Z M34.6436873,6.017 C34.6436873,9.372 32.065609,12 28.4918242,12 C24.9190544,12 22.3409762,9.372 22.3409762,6.017 C22.3409762,2.643 24.9190544,0 28.4918242,0 C32.065609,0 34.6436873,2.643 34.6436873,6.017 L34.6436873,6.017 Z M63.435949,11.738 L73.5269937,11.738 L73.5269937,9.366 L65.0325305,9.366 C64.6539387,10.265 64.1119333,11.058 63.435949,11.738 L63.435949,11.738 Z M72.0928108,7.137 L72.0928108,4.788 L65.5846858,4.788 C65.6415253,5.19 65.680095,5.6 65.680095,6.027 C65.680095,6.408 65.6506603,6.776 65.6070156,7.137 L72.0928108,7.137 Z M63.3070451,0.262 L73.4742141,0.262 L73.4742141,2.634 L64.9878709,2.634 C64.5859342,1.733 64.0134791,0.941 63.3070451,0.262 L63.3070451,0.262 Z",id:"cloudera",fill:"#FFFFFF"})]})})]})},b=(o(246),function(){return Object(c.jsxs)("div",{children:[Object(c.jsx)("div",{className:"headermain","aria-label":"Dataset for Automated Generation of Visualizations",children:Object(c.jsx)("div",{className:"  w-full  container-fluid   headerrow pl-1 ",children:Object(c.jsxs)("div",{className:"flex  h-full",children:[Object(c.jsx)("div",{className:"h-full   flex flex-col justify-center mr-2 ml-2  ",children:Object(c.jsx)("a",{href:"/#",children:Object(c.jsx)(j,{icon:"cloudera"})})}),Object(c.jsx)("div",{className:"apptitle  flex flex-col justify-center  mr-1",children:Object(c.jsxs)("div",{className:"text-white  font-semibold text-sm  iblock mr-2 ml-1",children:[" ","Covid Advisor"," "]})}),Object(c.jsx)("div",{className:"h-full   flex  text-sm  navbarlinks ",children:Object(c.jsx)(a.b,{exact:!0,to:"/",children:"Office Locations"})})]})})}),Object(c.jsx)("div",{}),Object(c.jsx)("div",{className:"headerboost",children:" "})]})}),h=o(69),f=(o(251),o(372)),x=o(375),m=o(222),O=o(229),p=o(371),v=p.a.Option,L=function(e){var t=e.locations||[],o=Object(n.useState)(0),i=Object(h.a)(o,2);i[0],i[1],t.map((function(e,t){return Object(c.jsxs)(v,{value:e.work_location,children:[" ",e.work_location," "]},"locrow"+t)}));return t.length>0&&Object(c.jsxs)("div",{className:"mt-2   inline-block rounded-sm   bg-white p-3  bg-opacity-90",children:[Object(c.jsxs)("div",{className:"mb-2 text-sm font-semibold",children:[" ","Location Type (",t.length,")"," "]}),Object(c.jsx)("div",{className:"mb-2",children:" "}),Object(c.jsx)("div",{className:"mt-2",children:Object(c.jsxs)(p.a,{defaultValue:e.locationType,showSearch:!0,style:{width:200},placeholder:"Select a location",optionFilterProp:"children",onChange:function(t){e.setLocationType(t)},filterOption:function(e,t){return t.children.toLowerCase().indexOf(e.toLowerCase())>=0},children:[Object(c.jsx)(v,{value:"work",children:"Work Locations"}),Object(c.jsx)(v,{value:"all",children:"All Employee Locations"})]})})]})};function w(e){return fetch(e).then((function(e){if(200===e.status)return e.json().then((function(e){return e}));console.log("Looks like there was a problem. Status Code: "+e.status)})).catch((function(e){console.log("Fetch Error :-S",e)}))}var g=o(218),C=o.n(g),k=o(219),N=o.n(k),y=(p.a.Option,function(e){var t=e.locations.map((function(e){return e.work_location})),o=C()(e.trends.filter((function(e){return t.includes(e.location)})),"slope_data.slope"),i=Object(n.useState)(0),s=Object(h.a)(i,2),l=(s[0],s[1],Object(n.useState)(!1)),r=Object(h.a)(l,2),a=r[0],d=r[1],u=N()(o.map((function(e){return e.slope_data.risk})),(function(e){return e.color+e.label})).reverse();function j(e){e.preventDefault(),document.getElementById("mainriskdiv").contains(e.target)||d(!1)}Object(n.useEffect)((function(){return window.addEventListener("click",j,!1),function(){window.removeEventListener("click",j,!1)}}),[]);var b=u.map((function(e,t){var n=t===u.length-1,i=o.filter((function(t){return t.slope_data.risk.color===e.color})),s=i.map((function(e,t){return Object(c.jsxs)("div",{className:"text-sm border p-1 pl-2 mb-1 cursor-pointer rounded-sm hover:bg-gray-100",children:[Object(c.jsx)("div",{className:"w-2.5 h-2.5 inline-block mr-2 bg-"+e.slope_data.risk.color+"-500",children:" "}),e.location," "]},"locrow"+t)}));return Object(c.jsxs)("div",{className:"p3 flex-1 "+(n?" ":" pr-3"),children:[Object(c.jsxs)("div",{className:"p-1 pl-2 pr-2  text-white whitespace-nowrap font-semibold rounded-sm mb-2   bg-"+e.color+"-500",children:[" ",e.label," (",i.length,")"]}),a&&Object(c.jsx)("div",{children:s})]},"labelrow"+t)}));o.map((function(e,t){return Object(c.jsxs)("div",{className:"text-sm",children:[Object(c.jsx)("div",{className:"w-2.5 h-2.5 inline-block mr-2 bg-"+e.slope_data.risk.color+"-500",children:" "}),e.location," "]},"locrow"+t)}));return o.length>0&&Object(c.jsxs)("div",{id:"mainriskdiv",className:"riskdiv overflow-auto mt-3 bg-white  rounded-sm  bg-opacity-90",children:[Object(c.jsxs)("div",{className:" inline-block    p-3 ",children:[Object(c.jsxs)("div",{className:"mb-2  flex",children:[Object(c.jsxs)("span",{className:"font-semibold flex-grow ",children:[" ","Office Location Risk"]}),Object(c.jsxs)("span",{onClick:function(e){d(!a)},className:"text-xs mt-1 mr-3 hover:underline pb-1 cursor-pointer",children:[" ",a?"< Hide Details":"Show Details > "]})]}),Object(c.jsxs)("div",{className:"flex",children:[" ",b," "]}),Object(c.jsx)("div",{className:"  overflow-auto"})]}),Object(c.jsx)("div",{className:"bg-red-500 bg-green-500 bg-yellow-500 border-red-500  border-yellow-500 border-green-500"})]})}),M=function(e){var t,o=Object(n.useState)({work:[],all:[]}),i=Object(h.a)(o,2),s=i[0],l=i[1],r=Object(n.useState)([]),a=Object(h.a)(r,2),d=a[0],u=a[1],j=Object(n.useState)("work"),b=Object(h.a)(j,2),p=b[0],v=b[1],g=Object(n.useState)({}),C=Object(h.a)(g,2),k=C[0],N=C[1],M={};d.forEach((function(e){M[e.location]=e.slope_data.risk}));var S=s[p].filter((function(e){return e.work_location.includes("Santa Clara")}))[0]||{},F=M["US-California-Santa Clara (HQ)"],_=[S.geo_long,S.geo_lat],Z=[],E=[];s[p].forEach((function(e){var t=[e.geo_long,e.geo_lat];Z.push({sourcePosition:_,targetPosition:t,sourceRisk:F,targetRisk:M[e.work_location]}),E.push({coords:t,risk:M[e.work_location],location:e.work_location})}));function P(e){console.log("location clickedd",e.object);var t=document.getElementById("tooltipitem");t.style.top=e.y-10+"px",t.style.left=e.x+15+"px",N(e.object)}return Object(n.useEffect)((function(){var t=e.selections.serverBasePath+"/trends",o=e.selections.serverBasePath+"/locations";console.log("Trends and Locations Data requested .."),w(o).then((function(e){e&&l(e)})).catch((function(e){console.log("Failed to fetch locations data.",e)})),w(t).then((function(e){e&&u(e)})).catch((function(e){console.log("Failed to fetch trends data.",e)}))}),[e.selections.serverBasePath]),Object(n.useEffect)((function(){document.title="Cloudera Covid Advisor | Locations "}),[]),Object(c.jsxs)("div",{className:"",children:[Object(c.jsx)("div",{className:"  ",children:Object(c.jsxs)(f.a,{initialViewState:{longitude:18.419257623928356,latitude:47.22416217215195,zoom:1.3,pitch:10,bearing:0},controller:!0,children:[Object(c.jsx)(O.a,{id:"map",width:"100%",controller:!0,children:Object(c.jsx)(m.a,{mapboxApiAccessToken:"pk.eyJ1IjoidmljdG9yZGliaWEiLCJhIjoiY2pzNWY2OWp4MGYwaTQ0cXBkaHFsc2hueiJ9.JdZVrIDyHkAsnuXqAxycsg"})}),Object(c.jsx)(x.a,{id:"locations-scatter-plot",data:E,pickable:!0,opacity:.8,radiusMinPixels:8,getPosition:function(e){return e.coords},getRadius:function(e){return 1900},getFillColor:function(e){var t;return function(e){var t=[0,0,0];switch(e){case"red":t=[239,68,68];break;case"yellow":t=[245,158,11];break;case"green":t=[16,185,129];break;default:t=[0,0,0]}return t}(null===(t=e.risk)||void 0===t?void 0:t.color)},getLineColor:function(e){return[0,0,0]},onClick:P,onMouseEnter:P})]})}),Object(c.jsxs)("div",{id:"tooltipitem",className:"absolute -left-10 p-3 shadow rounded-sm bg-white",children:[" ",Object(c.jsx)("div",{className:"h-2 mb-1 bg-"+(null===(t=k.risk)||void 0===t?void 0:t.color)+"-500"}),k.location]}),Object(c.jsxs)("div",{className:"absolute ml-2 ",children:[Object(c.jsx)(L,{locations:s[p],trends:d,setLocationType:v,locationType:p}),Object(c.jsx)(y,{locations:s[p],trends:d})]})]})};var S=function(){var e={serverBasePath:"http://localhost:5000"};return Object(c.jsx)(a.a,{children:Object(c.jsxs)("div",{className:"flex flex-col h-screen  ",children:[Object(c.jsx)(b,{}),Object(c.jsx)("main",{className:"container-fluid w-full   flex-grow p-2",children:Object(c.jsx)(d.a,{exact:!0,path:"/",render:function(t){return Object(c.jsx)(M,Object(r.a)(Object(r.a)({},t),{},{selections:e}))}})}),Object(c.jsx)(u,{})]})})},F=function(e){e&&e instanceof Function&&o.e(3).then(o.bind(null,376)).then((function(t){var o=t.getCLS,c=t.getFID,n=t.getFCP,i=t.getLCP,s=t.getTTFB;o(e),c(e),n(e),i(e),s(e)}))};l.a.render(Object(c.jsx)(i.a.StrictMode,{children:Object(c.jsx)(S,{})}),document.getElementById("root")),F()}},[[358,1,2]]]);
//# sourceMappingURL=main.0cf272b1.chunk.js.map